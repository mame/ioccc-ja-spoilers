---
id: 2004/newbern
year: 2004
order: 9
authors: "Jeff_Newbern"
orig_url: "https://www.ioccc.org/2004/newbern.c"
hint_url: "https://github.com/ioccc-src/winner/blob/main/2004/newbern.hint"
title: "IOCCC 2004: Best Font Engine"
award_ja: "最高のフォントエンジン"
---

## 動作

newbern.datのフォントをレンダリングする。

第1引数にフォントファイル、第2引数にレンダリングしたい文字列を指定する。

```
$ gcc -o newbern newbern.c

$ ./newbern newbern.dat "Hi!"
                   ##                                                  ###
                   ##                                                  ###
                   ##                                                  ###
                   #######################################################
                   #######################################################
                   #######################################################
                   #######################################################
                   #######################################################
                   ##                            ##                    ###
                   ##                            ##                    ###
                   ##                            ##                    ###
                                                 ##
                                                 ##
                                                 ##
                                                 ##
                                                 ##
                                                 ##
                                                 ##
                   ##                            ##                    ###
                   ##                            ##                    ###
                   #######################################################
                   #######################################################
                   #######################################################
                   #######################################################
                   #######################################################
                   #######################################################
                   ##                                                  ###
                   ##                                                  ###


                   ##                            ##
                   ##                            ##          ####
                   ################################        ########
                   ################################        ########
                   ################################        ########
                   ################################         ######
                   ################################          ####
                   ##

                     ####                              ############
                    ######                   #########################
                   ########      ########################################
                   ########      ########################################
                   ########            ################################
                     ####                              ############

```

newbern.datを作るための機能もある。
第1引数だけ指定すると、標準入力からフォントデータを作る。

```
$ ./newbern newbern.dat A | ./newbern A
A+++1
A+++1
A+++1
A+++9
A+++i.
A+++Qj
A+++1i2
A+++1+j,
A+++++[j
A++++++j.
A++++++.j,
A++++++.[j
A++++++.+j.
A++++++.+Kj,
A++++++.++[J
A++++++.++Kj.
A++++++.++jjj,
A++++++.+gjjj,
A++++++.Kjjj:
A++++++.ijjJ
A++++++jjjj
A++++++jjj:
A+++1+ijjj
A+++1[jjj2
A+++1jjjJ
A+++ijjj
A+++ijj:
A+++ijJ
A+++ij,
A+++i:
A+++i
A+++1
A+++1
A+++1
```

おまけとして、引数を与えないときはモールス信号符号化する。

```
$ echo SOS | ./newbern
# # #

### ### ###

# # #
```

## 解説

設定可能なバナー。

コード形状は"IOCCC"のバナー。ただしnewbern.datのフォントとは違う。

newbern.hintに作者コメントとして「さらなる暗号化が隠されている」とある。
第3引数に何かを指定すると、1文字表示するごとにフォントテーブルを1つずらす（[ヴィジュネル暗号](https://ja.wikipedia.org/wiki/%E3%83%B4%E3%82%A3%E3%82%B8%E3%83%A5%E3%83%8D%E3%83%AB%E6%9A%97%E5%8F%B7)）。
次のように実行すると"AAA"ではなく"BCD"がバナーとして出てくる。

```
$ ./newbern newbern.dat AAA 1
```

さらに最後の方に、`while(argc++ < 1) { ... }`のようなコードがあるが、これはまともに実行する方法がないし、中にあるコードも意味があるようにみえなかったので、ただのパディングか。
