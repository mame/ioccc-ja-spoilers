---
id: 2011/goren
year: 2011
order: 6
patch: true
authors: "Uri_Goren"
orig_url: "https://www.ioccc.org/2011/goren/goren.c"
hint_url: "https://www.ioccc.org/2011/goren/hint.html"
title: "IOCCC 2011: Most artistic"
award_ja: "もっとも芸術的"
---

## 動作

適当な文字列を標準入力に与えて起動すると次のようなメッセージが出る。

```
$ gcc -o goren goren.c

$ echo "Hello, world!" | ./goren
|\_/|
|   |           /
\==============/
This is not a pipe
```

`|`で始まる文字列を与えた場合は次のようになる。

```
$ echo '|' | ./goren
       |
This is a pipe
```

## 解説

[ルネ・マグリット](https://ja.wikipedia.org/wiki/%E3%83%AB%E3%83%8D%E3%83%BB%E3%83%9E%E3%82%B0%E3%83%AA%E3%83%83%E3%83%88)の油彩画、『[イメージの裏切り](https://ja.wikipedia.org/wiki/%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%81%AE%E8%A3%8F%E5%88%87%E3%82%8A)』へのオマージュ作品。
『イメージの裏切り』は、パイプの絵に「これはパイプではない」という注意書きをつけた、シュルレアリスムの作品。
パイプではなく、絵である（たばこを詰めることはできない）、という主張らしい。

最初の動作例はマグリットの絵をアスキーアート風に表現している。
第2の動作例はさらなるひねり。
`|`は実際に[パイプ](https://ja.wikipedia.org/wiki/%E3%83%91%E3%82%A4%E3%83%97_%28%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF%29)なので、メッセージが「これはパイプである」に変わる。

コード形状は、額縁の中にC言語のHello, world!みたいな単純なコードが書かれているようなイメージ。
センスが溢れている。
もちろん、コードとしては額縁部分の文字列が割り込んでいるので、違う意味になる。
いちばん最後の行には`Ar;t*ist="Rene Magritte"-(1898-1967);`と、マグリットの名前が書かれている。

技術的なポイントは、条件式をまったく使ってないところ。
マグリットへの「無条件」の称賛を示す、とのこと。
`if`文はもちろん、`?:`も`&&`も`||`もない。
出力する文字列を変えるだけなのでそこまで難易度が高くはないものの、全体として非常に完成度が高い作品。

hint.textにある通り、64ビット環境に対応していないので、最低限の修正を行った。
最下行に余裕があるのでおそらくレイアウトを崩さない修正も可能ではないかと思うが、差分が非常に大きくなってしまうのでこのままとした。
`-m32`でも動作はするが、最後にsegfaultが起きた（詳細未調査）。
