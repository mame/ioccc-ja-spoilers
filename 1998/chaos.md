---
id: 1998/chaos
year: 1998
order: 3
patch: true
authors: "Alan_De_Smet"
orig_url: "https://www.ioccc.org/1998/chaos.c"
hint_url: "https://github.com/ioccc-src/winner/blob/main/1998/chaos.hint"
title: "IOCCC 1998: Best Object Orientation"
award_ja: "最高のオブジェクト指向"
---

## 動作

3Dオブジェクトを端末で見るビューア。
デフォルトでは立方体を表示する。

```
$ gcc -o chaos chaos.c -lncurses

$ ./chaos
```

```





                                     ....
                              ...```` :  `````......
                        ..````        :             `::
                        : ```...      :            .`.`
                         :      ````..:          .`  :
                         :            :```...  .`   .`
                         :            :      `:     :
                          :           :.      :    .`
                          :        .``  ``...:     :
                          :     ..`          :`.. .`
                           :  .`             :   :`
                           :``              .`  .`
                            ``..            :  .`
                                ``.         : .`
                                   ``..    .`:
                                       ``..::
                                           `


```

<kbd>h</kbd>と<kbd>y</kbd>で第1軸での回転と逆回転、<kbd>j</kbd>と<kbd>u</kbd>で第2軸での回転と逆回転、<kbd>k</kbd>と<kbd>i</kbd>で第3軸での回転と逆回転。
<kbd>a</kbd>でズームアップ、<kbd>z</kbd>でズームダウン、<kbd>q</kbd>で終了。

コマンドライン引数にデータファイルを指定することで、他のオブジェクトも見える。

```
$ ./chaos ioccc.data
```

```




                                                         .::.
                                                .:::.  .::`:::
                                       ...    .::``:::.:`
                                   .:::::::. .::      ::
                     .......      .:::`  ```.::       ::  .:`
                 ..::::::::::.   ::::       :::    ..::::::
      ..        :::::```````:`:. :::         ::...::`   ``
   `:` `:     .:::.`         ::.:`::.    .::  `:::`
    `:. ::    ::::            ::: `:::::::`
      :`.::   :::`.          .::    ````
       : :.`.  : ::`.   ...:::`
        `.:.`.  ``:::::::::``
         `.:`:.     ``````
           :. :.
            ``





```

なお、3秒操作をしないと勝手に回転が始まる。

## 解説

コード形状は普通。

無引数のときに表示される立方体のデータは、コード中に文字列リテラル（`char P[] = "AlWuzEre ...";`）として埋め込まれている。
ただし普通に`P`から読むのではなく、自分自身の実行ファイルを`fopen`し、データのヘッダである`AlWuzEre`を手がかりにデータの位置を特定し、そこから読み込むという変なことをしている。
つまりコンパイラがこの文字列データをそのまま実行ファイルに埋め込むことを期待している。
しかし、自分の環境ではローカル変数の文字列リテラルはそのまま埋め込まれなかったので、グローバル変数に置き換える修正が必要だった。

賞名の[オブジェクト指向](https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91)は、オブジェクトをみるツールというのにかけている。
